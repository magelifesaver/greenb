(()=>{"use strict";var e={70:(e,o,r)=>{e.exports=r(462)},462:(e,o,r)=>{var t=r(609),s=Symbol.for("react.element"),c=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(e,o,r){var t,a={},l=null,p=null;for(t in void 0!==r&&(l=""+r),void 0!==o.key&&(l=""+o.key),void 0!==o.ref&&(p=o.ref),o)c.call(o,t)&&!i.hasOwnProperty(t)&&(a[t]=o[t]);if(e&&e.defaultProps)for(t in o=e.defaultProps)void 0===a[t]&&(a[t]=o[t]);return{$$typeof:s,type:e,key:l,ref:p,props:a,_owner:n.current}}o.jsx=a,o.jsxs=a},609:e=>{e.exports=window.React}},o={};const r=window.wp.i18n,t=window.wp.plugins,s=window.wp.element,c=window.wp.data;var n=function r(t){var s=o[t];if(void 0!==s)return s.exports;var c=o[t]={exports:{}};return e[t](c,c.exports,r),c.exports}(70);const{ExperimentalDiscountsMeta:i,extensionCartUpdate:a}=window.wc.blocksCheckout,{getSetting:l}=window?.wc?.wcSettings,p=l("kestrel/store-credit_data"),d=window.wc.wcBlocksData?.CART_STORE_KEY,u=()=>{const e="yes"===p?.should_display_coupons,o=p?.coupons_data||[],t=(0,c.useSelect)(e=>e(d).getCartData(),[]),i=(0,s.useMemo)(()=>{if(!o||!Array.isArray(o))return[];const e=(t?.coupons||[]).map(e=>e?.code);return o.filter(o=>!e.includes(o?.code||""))},[o,t?.coupons]);if(0===i.length||!e)return null;const l=async e=>{if(e)try{await a({data:{couponCode:e},namespace:"kestrel/store-credit"})}catch(e){console.error("Store Credit: Error applying coupon",e)}};return(0,n.jsx)("div",{"data-twp":!0,id:"wc-store-credit-coupons-wrapper",children:(0,n.jsxs)("div",{className:"wc-store-credit-coupons-block md:px-4 py-4 border-y border-[hsla(0,0%,7%,.11)]",children:[(0,n.jsx)("span",{className:"wc-block-components-totals-item__label mb-3 wc-store-credit-coupons__title",children:p?.coupons_notice_text||(0,r.__)("Store credit available:","woocommerce-store-credit")}),(0,n.jsx)("div",{className:"wc-store-credit-coupons-list grid gap-2 mt-4",children:i.map((e,o)=>{const{formatPrice:t}=window?.wc?.priceFormat,s=e.code,c=e.amount||"",i=(0,r.sprintf)((0,r.__)("Apply %s","woocommerce-store-credit"),t(c||0));return s?(0,n.jsxs)("div",{className:" wc-store-credit-coupons__coupon__wrapper flex flex-wrap gap-2 items-center justify-between py-1 px-3 border border-gray-300 rounded cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>l(s),children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"text-sm font-semibold text-gray-800 uppercase",children:s}),c&&(0,n.jsx)("div",{className:"text-xs text-gray-600",children:e?.expires})]}),(0,n.jsx)("button",{type:"button",className:"wc-store-credit-coupons__button wc-block-components-button wp-element-button py-1 px-4 !text-xs",onClick:e=>{e.stopPropagation(),l(s)},children:i})]},o):null})})]})})};(0,t.registerPlugin)("wc-store-credit-checkout-blocks",{render:e=>(0,n.jsx)(i,{children:(0,n.jsx)(u,{...e})}),scope:"woocommerce-checkout"})})();