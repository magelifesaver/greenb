"use strict";(globalThis.webpackChunk_kestrelwp_account_funds_for_woocommerce=globalThis.webpackChunk_kestrelwp_account_funds_for_woocommerce||[]).push([[51],{504:(e,t,c)=>{c.r(t),c.d(t,{default:()=>u});var o=c(143),n=c(87),a=c(723);const s=(0,c(621).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var l=c(540),r=c(104);const{extensionCartUpdate:i}=window.wc?.blocksCheckout;function u({extensions:e}){const t=e?.["account-funds"]?.partial_payment_available,[c,u]=(0,n.useState)(l.F?.applied_funds?.amount||0),{createErrorNotice:m}=(0,o.dispatch)("core/notices"),{formatPrice:p}=window?.wc?.priceFormat,d=`wc-${l.F?.id}`,w=(0,a.sprintf)((0,a.__)("Use %s from your %s","woocommerce-account-funds"),p(l.F?.available_funds?.amount||0),`${l.F?.title||(0,a.__)("Account Funds","woocommerce-account-funds")}`);async function f({applyFunds:e=!1}){const t=await i({namespace:"account-funds",data:{...e?{applyFunds:!0}:{removeFunds:!0}}}).catch((()=>{m((0,a._x)("An error occurred, please try again or try an alternate form of payment.","failed to apply account funds to order","woocommerce-account-funds"),{context:"wc/checkout/payments",id:"account-funds-partial-payment-error"})}));t&&u(t?.extensions?.["account-funds"]?.applied_funds?.amount||0)}return t?(0,r.jsx)("div",{id:d,className:"wc-block-components-totals-wrapper !tw-px-16px lg:!tw-px-0",children:c?(0,r.jsxs)("div",{className:"wc-block-components-totals-item",children:[(0,r.jsx)("span",{className:"wc-block-components-totals-item__label",children:l.F?.title}),(0,r.jsxs)("div",{className:"tw-flex tw-gap-4px",children:[(0,r.jsxs)("span",{className:"wc-block-formatted-money-amount wc-block-components-formatted-money-amount wc-block-components-totals-item__value tw-text-success",children:["-",p(c)," "]}),(0,r.jsxs)("a",{role:"button",href:`#${d}-partial-payment-remove-link`,className:"tw-no-underline tw-flex tw-items-center hover:tw-text-destructive tw-outline-none","aria-label":w,onClick:()=>f({applyFunds:!1}),children:[(0,r.jsx)("span",{className:"tw-sr-only",children:(0,a.sprintf)((0,a.__)("Remove %s","woocommerce-account-funds"),`${l.F?.title||(0,a.__)("Account Funds","woocommerce-account-funds")}`)}),(0,r.jsx)(s,{size:16})]})]})]}):(0,r.jsx)("div",{className:"tw-gap-x-8px tw-justify-between wc-block-components-totals-item",children:(0,r.jsx)("a",{role:"button",href:`#${d}-partial-payment-link`,className:"wc-block-components-totals-coupon-link","aria-label":w,onClick:()=>f({applyFunds:!0}),children:w})})}):null}}}]);