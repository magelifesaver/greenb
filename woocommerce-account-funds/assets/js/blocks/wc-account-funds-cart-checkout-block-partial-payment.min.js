"use strict";(globalThis.webpackChunk_kestrelwp_account_funds_for_woocommerce=globalThis.webpackChunk_kestrelwp_account_funds_for_woocommerce||[]).push([[51],{538:(e,t,o)=>{o.r(t),o.d(t,{default:()=>w});var c=o(143),n=o(87),a=o(723),s=o(609);const r=(...e)=>e.filter((e,t,o)=>Boolean(e)&&o.indexOf(e)===t).join(" ");var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const i=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:n="",children:a,iconNode:i,...u},d)=>(0,s.createElement)("svg",{ref:d,...l,width:t,height:t,stroke:e,strokeWidth:c?24*Number(o)/Number(t):o,className:r("lucide",n),...u},[...i.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(a)?a:[a]])),u=((e,t)=>{const o=(0,s.forwardRef)(({className:o,...c},n)=>{return(0,s.createElement)(i,{ref:n,iconNode:t,className:r(`lucide-${a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,o),...c});var a});return o.displayName=`${e}`,o})("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var d=o(429),m=o(104);const{extensionCartUpdate:p}=window.wc?.blocksCheckout;function w({extensions:e}){const t=e?.["account-funds"]?.partial_payment_available,[o,s]=(0,n.useState)(d.F?.applied_funds?.amount||0),{createErrorNotice:r}=(0,c.dispatch)("core/notices"),{formatPrice:l}=window?.wc?.priceFormat,i=`wc-${d.F?.id}`,w=(0,a.sprintf)((0,a.__)("Use %s from your %s","woocommerce-account-funds"),l(d.F?.available_funds?.amount||0),`${d.F?.title||(0,a.__)("Account Funds","woocommerce-account-funds")}`);async function f({applyFunds:e=!1}){const t=await p({namespace:"account-funds",data:{...e?{applyFunds:!0}:{removeFunds:!0}}}).catch(()=>{r((0,a._x)("An error occurred, please try again or try an alternate form of payment.","failed to apply account funds to order","woocommerce-account-funds"),{context:"wc/checkout/payments",id:"account-funds-partial-payment-error"})});t&&s(t?.extensions?.["account-funds"]?.applied_funds?.amount||0)}return t?(0,m.jsx)("div",{id:i,className:"wc-block-components-totals-wrapper !tw-px-16px lg:!tw-px-0",children:o?(0,m.jsxs)("div",{className:"wc-block-components-totals-item",children:[(0,m.jsx)("span",{className:"wc-block-components-totals-item__label",children:d.F?.title}),(0,m.jsxs)("div",{className:"tw-flex tw-gap-4px",children:[(0,m.jsxs)("span",{className:"wc-block-formatted-money-amount wc-block-components-formatted-money-amount wc-block-components-totals-item__value tw-text-success",children:["-",l(o)," "]}),(0,m.jsxs)("a",{role:"button",href:`#${i}-partial-payment-remove-link`,className:"tw-no-underline tw-flex tw-items-center hover:tw-text-destructive tw-outline-none","aria-label":w,onClick:()=>f({applyFunds:!1}),children:[(0,m.jsx)("span",{className:"tw-sr-only",children:(0,a.sprintf)((0,a.__)("Remove %s","woocommerce-account-funds"),`${d.F?.title||(0,a.__)("Account Funds","woocommerce-account-funds")}`)}),(0,m.jsx)(u,{size:16})]})]})]}):(0,m.jsx)("div",{className:"tw-gap-x-8px tw-justify-between wc-block-components-totals-item",children:(0,m.jsx)("a",{role:"button",href:`#${i}-partial-payment-link`,className:"wc-block-components-totals-coupon-link","aria-label":w,onClick:()=>f({applyFunds:!0}),children:w})})}):null}}}]);