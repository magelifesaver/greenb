jQuery(document).ready(function(a){var e=null,n=function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n.closest(".ff-accordion-container"),f=t.find(".ff-accordion-content"),r=t.find(".ff-accordion-icon"),c="true"===n.attr("aria-expanded");if(e=t.data("accordion_id"),!o||!c)if(c)f.slideUp(300,function(){n.attr("aria-expanded","false"),r.removeClass("ff-accordion-icon-open"),n.removeClass("ff-accordion-header-open"),e=null});else{if(f.css("height","auto").hide(),n.attr("aria-expanded","true"),r.addClass("ff-accordion-icon-open"),n.addClass("ff-accordion-header-open"),o)return void f.slideDown(300,function(){e=null});t.closest("form.frm-fluent-form").find(".ff-accordion-container").not(t).each(function(){var n=a(this),o=n.find(".ff-accordion-header"),t=n.find(".ff-accordion-content"),f=n.find(".ff-accordion-icon"),r=n.data("accordion_id"),c="yes"===n.data("collapse_when_others_open");"true"===o.attr("aria-expanded")&&r!==e&&c&&t.slideUp(300,function(){o.attr("aria-expanded","false"),f.removeClass("ff-accordion-icon-open"),o.removeClass("ff-accordion-header-open")})}),f.slideDown(300,function(){e=null})}},o=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e.data("tab_id"),t=e.closest("form.frm-fluent-form").find("[data-accordion_id='"+o+"']"),f=a("#"+o+"-content"),r="true"===e.attr("aria-selected");if(!n||!r){var c=e.closest(".ff-tab-header-group").length;if(r)e.attr("aria-selected","false"),e.removeClass("ff-tab-header-active ff-tab-header-border-none"),c&&e.siblings().removeClass("ff-tab-header-active ff-tab-header-border-none"),f.hide();else{var d=t.closest("form.frm-fluent-form");d.find(".ff-tab-header").not(e).each(function(){var e=a(this),n=e.closest(".ff-accordion-container");n.length||(n=d.find('[data-accordion_id="'.concat(e.data("tab_id"),'"]')));var o=n.find(".ff-tab-content");"yes"===n.data("collapse_when_others_open")&&("true"===e.attr("aria-selected")||e.closest(".ff-tab-header-group").length)&&(e.attr("aria-selected","false"),e.removeClass("ff-tab-header-active ff-tab-header-border-none"),o.hide())}),e.attr("aria-selected","true"),e.addClass("ff-tab-header-active ff-tab-header-border-none"),c&&(e.siblings(".ff-tab-header").each(function(){var e=a(this),n=e.data("tab_id");a("#"+n).hide(),e.removeClass("ff-tab-header-active"),e.addClass("ff-tab-header-border-none"),e.attr("aria-selected","false")}),a("#"+o).show()),f.show()}}},t=function(){var e=""+(new Date).getTime()+Math.floor(100*Math.random());a(".ff-accordion-connected").each(function(){var n=a(this);if(n.prev(".ff-accordion-type-start").addClass("ff-accordion-connected ff-accordion-connected-start"),n.next(".ff-accordion-connected").length||n.addClass("ff-accordion-connected-close").removeClass("ff-accordion-connected-both"),n.hasClass("ff-accordion-mode-tabs")){var o=n.prev(".ff-accordion-type-start"),t=o.find(".ff-tab-header");if(t.length){var f=a('<div class="ff-tab-header-group ff-accordion-mode-tabs" data-header_group_id="'.concat(e,'"></div>'));o.before(f),f.append(t)}var r=n.find(".ff-tab-header"),c=n.closest("form.frm-fluent-form").find('[data-header_group_id="'.concat(e,'"]'));c.append(r),c.find(".ff-tab-header-active").length&&c.find(".ff-tab-header").addClass("ff-tab-header-border-none"),n.next(".ff-accordion-connected.ff-accordion-mode-tabs").length||(e=""+(new Date).getTime()+Math.floor(100*Math.random()))}})};t(),a(document).on("reInitExtras","form.frm-fluent-form",function(){t()}),a(document).on("click",".ff-accordion-header",function(e){e.preventDefault(),e.stopPropagation(),n(a(this))}),a(document).on("click",".ff-tab-header",function(e){e.preventDefault(),e.stopPropagation(),o(a(this))}),a(document.body).on("fluentform_error_below_element",function(e,t){var f=t.element;if(f.length){var r=f.closest(".ff-accordion-content, .ff-tab-content");if(r.length)if(r.hasClass("ff-tab-content")){var c=r.attr("id").replace("-content",""),d=a("[data-accordion_id='"+c+"']"),i=d.find(".ff-tab-header");i.length||(i=d.closest("form.frm-fluent-form").find('[data-tab_id="'.concat(d.attr("id"),'"'))),i.find(".ff-tab-error-indicator").length||i.append('<span class="ff-tab-error-indicator" aria-label="Has validation errors">!</span>'),o(i,!0)}else if(r.hasClass("ff-accordion-content")){var s=r.closest(".ff-accordion-container").find(".ff-accordion-header");s.find(".ff-accordion-error-indicator").length||s.find(".ff-accordion-title").append('<span class="ff-accordion-error-indicator" aria-label="Has validation errors">!</span>'),n(s,!0)}}}),a(document.body).on("fluentform_error_cleared",function(a,e){var n=e.element;if(n.length){var o=n.closest(".ff-accordion-content, .ff-tab-content");if(o.length&&!(o.find(".ff-el-is-error").length>0))if(o.hasClass("ff-tab-content")){var t=o.closest(".ff-accordion-container");t.find(".ff-tab-error-indicator").remove(),t.hasClass("ff-accordion-connected")&&t.closest("form.frm-fluent-form").find('.ff-tab-header[data-tab_id="'.concat(t.attr("id"),'"')).find(".ff-tab-error-indicator").remove()}else o.hasClass("ff-accordion-content")&&o.closest(".ff-accordion-container").find(".ff-accordion-error-indicator").remove()}}),a(document).on("keydown",".ff-accordion-header",function(e){13!==e.which&&32!==e.which||(e.preventDefault(),n(a(this)))}),a(document).on("keydown",".ff-tab-header",function(e){13!==e.which&&32!==e.which||(e.preventDefault(),o(a(this)))}),a(".ff-accordion-container").closest("form.frm-fluent-form").each(function(){var e=a(this);e.on("do_calculation",function(){e.find(".ff-accordion-container").each(function(){var e,n=a(this),o=n.data("display_mode"),t=n.data("accordion_id");(e="tabs"===o?n.find(".ff-tab-content"):n.find(".ff-accordion-content")).find(".has-conditions").length&&(0===e.children().filter(function(){return!a(this).hasClass("ff-tab-description")&&!a(this).hasClass("ff_excluded")}).length?(n.addClass("ff-accordion-container-hidden"),n.hide(),"tabs"===o&&n.hasClass("ff-accordion-connected")&&n.closest("form.frm-fluent-form").find('.ff-tab-header[data-tab_id="'.concat(t,'"]')).closest(".ff-tab-header-group").hide()):(n.removeClass("ff-accordion-container-hidden"),n.show(),"tabs"===o&&n.hasClass("ff-accordion-connected")&&n.closest("form.frm-fluent-form").find('.ff-tab-header[data-tab_id="'.concat(t,'"]')).closest(".ff-tab-header-group").show()))})})})});