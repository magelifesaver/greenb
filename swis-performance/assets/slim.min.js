function swisSlimLoad(){jQuery(document).ready(function(n){if(n("#swis-slim-rules").on("click",".swis-slim-rule-actions .button-link-edit",function(){var s=n(this).closest(".swis-slim-rule");s.find(".swis-slim-rule-actions").hide(),s.find(".swis-slim-pretty-rule").hide(),s.find(".swis-slim-hidden").show()}),n("#swis-slim-rules").on("click",".swis-slim-rule-save",function(){var i=n(this).closest(".swis-slim-rule"),s=i.attr("data-slim-rule-id"),r=i.find(".swis-slim-error-message");r.hide();var e=i.attr("data-slim-handle"),a=n(this).text(),t=n(this);t.text(swisperformance_vars.saving_message),t.prop("disabled",!0);s={action:"swis_slim_rule_edit",swis_slim_action:"update",swis_wpnonce:swisperformance_vars._wpnonce,swis_slim_handle:e,swis_slim_rule_type:"disable",swis_slim_exclusions:i.find(".swis-slim-raw-rule input").val(),swis_slim_mode:i.find("input[name=swis_slim_mode_"+s+"]:checked").val()};return n.post(ajaxurl,s,function(s){try{var e=JSON.parse(s)}catch(s){return r.html(swisperformance_vars.invalid_response),r.show(),t.text(a),t.prop("disabled",!1),!1}e.success?i.replaceWith(e.message):(r.html(e.error),r.show(),t.text(a),t.prop("disabled",!1))}),!1}),n("#swis-slim-rules").on("click",".swis-slim-rule-actions .button-link-delete",function(){var i=n(this).closest(".swis-slim-rule"),s=i.attr("data-slim-rule-id"),r=i.find(".swis-slim-error-message");r.hide();var e=i.attr("data-slim-handle"),a=n(this).text(),t=n(this);return confirm(swisperformance_vars.remove_rule)&&(t.text(swisperformance_vars.removing_message),t.prop("disabled",!0),s={action:"swis_slim_rule_edit",swis_slim_action:"delete",swis_wpnonce:swisperformance_vars._wpnonce,swis_slim_handle:e,swis_slim_rule_type:"disable",swis_slim_mode:i.find("input[name=swis_slim_mode_"+s+"]:checked").val()},n.post(ajaxurl,s,function(s){try{var e=JSON.parse(s)}catch(s){return r.html(swisperformance_vars.invalid_response),r.show(),t.text(a),t.prop("disabled",!1),!1}e.success?i.fadeOut("slow").remove():(r.html(e.error),r.show(),t.text(a),t.prop("disabled",!1))})),!1}),n("#swis-slim-add-rule .swis-slim-rule-add").on("click",function(){var i=n(this).closest("#swis-slim-add-rule").find(".swis-slim-error-message");i.hide();var r=n(this).text(),a=n(this);a.text(swisperformance_vars.saving_message),a.prop("disabled",!0);var s={action:"swis_slim_rule_edit",swis_slim_action:"create",swis_wpnonce:swisperformance_vars._wpnonce,swis_slim_handle:n("#swis_slim_new_handle").val(),swis_slim_rule_type:"disable",swis_slim_exclusions:n("#swis_slim_new_exclusions").val(),swis_slim_mode:n("input[name='swis_slim_new_mode']:checked").val()};return n.post(ajaxurl,s,function(s){try{var e=JSON.parse(s)}catch(s){return i.html(swisperformance_vars.invalid_response),i.show(),a.text(r),a.prop("disabled",!1),!1}e.success?(n("#swis-slim-rules").append(e.message),n("#swis_slim_new_handle").val(""),n("#swis_slim_new_exclusions").val(""),n("#swis_slim_new_mode_all").prop("checked",!0)):(i.html(e.error),i.show()),a.text(r),a.prop("disabled",!1)}),!1}),"undefined"!=typeof swisJSErrors&&swisJSErrors.length){for(var s=0;s<swisJSErrors.length;s++){var e="<p>"+s+": "+swisJSErrors[s][0]+'<br><a href="'+swisJSErrors[s][1]+'">'+swisJSErrors[s][1]+":"+swisJSErrors[s][2]+"</a></p>";n(".swis-slim-error-log").append(e)}n(".swis-slim-caught-errors").show()}var i;function r(s,i){n(".swis-ccss-success-message").hide(),n(".swis-ccss-error-message").hide(),n.post(swisperformance_vars.ajaxurl,s,function(s){try{var e=JSON.parse(s)}catch(s){return n(".swis-ccss-error-message").html(swisperformance_vars.invalid_response),n(".swis-ccss-error-message").show(),!1}e.error?(n(".swis-ccss-error-message").html(e.error),n(".swis-ccss-error-message").show(),i.prop("disabled",!1),i.text(swisccss_vars.save_message)):e.success&&e.replace?n("#swis-active-critical-css").replaceWith(e.success):e.success?(i.prop("disabled",!1),i.text(swisccss_vars.save_message),n("#swis-active-critical-css-template-code").val(e.css),n(".swis-ccss-success-message").html(e.success),n(".swis-ccss-success-message").show().delay(1e4).fadeOut("slow")):(i.prop("disabled",!1),i.text(swisccss_vars.save_message),n(".swis-ccss-error-message").html(swisperformance_vars.invalid_response),n(".swis-ccss-error-message").show())})}n(".swis-slim-show-errors").on("click",function(){n(this).hide(),n(".swis-slim-hide-errors").show(),n(".swis-slim-error-log").show()}),n(".swis-slim-hide-errors").on("click",function(){n(this).hide(),n(".swis-slim-show-errors").show(),n(".swis-slim-error-log").hide()}),"undefined"!=typeof swis_slim_more_assets&&(n("#swis-slim-processing").show(),i={action:"swis_slim_get_assets_html",swis_wpnonce:swisperformance_vars._wpnonce,swis_slim_assets:swis_slim_more_assets,swis_slim_current_page:n("#swis-slim-current-page").text()},n.post(swisperformance_vars.ajaxurl,i,function(s){try{var e=JSON.parse(s)}catch(s){n("#swis-slim-processing").html(swisperformance_vars.invalid_response)}if(e.success){for(var i=0;i<e.message.length;i++){var r=e.message[i];n("table#swis-slim-assets-"+r.type).append(r.html)}swisperformance_vars.check_assets?function(){n("#swis-slim-processing").show();n("#swis-slim-current-page").text();var s={action:"swis_slim_check_assets",swis_wpnonce:swisperformance_vars._wpnonce,swis_slim_current_page:n("#swis-slim-current-page").text()};n.post(swisperformance_vars.ajaxurl,s,function(s){try{var i=JSON.parse(s)}catch(s){n("#swis-slim-processing").html(swisperformance_vars.invalid_response)}i.error?n("#swis-slim-processing").html(i.error):(n("#swis-slim-assets-pane tr[data-slim-handle]").each(function(){for(var s=0;s<i.length;s++){var e=i[s];if(e===n(this).attr("data-slim-handle"))return!0}n("#swis-slim-show-all-assets").show(),n(this).hide(),n(this).find(".swis-slim-asset-status").append('<div class="dashicons dashicons-lock"></div>')}),n("#swis-slim-processing").hide())})}():n("#swis-slim-processing").hide()}else n("#swis-slim-processing").html(e.error)})),n("#swis-slim-show-all-assets").on("click",function(){n("#swis-slim-assets-pane tr[data-slim-handle]").show()}),n(".swis-slim-assets").on("click",".swis-slim-mode-all",function(){n(this).closest("form.swis-slim-rule").find(".swis-slim-rule-exclusions").prop("disabled",!0)}),n(".swis-slim-assets").on("click",".swis-slim-mode-exclude,.swis-slim-mode-include",function(){n(this).closest("form.swis-slim-rule").find(".swis-slim-rule-exclusions").prop("disabled",!1)}),n(".swis-slim-assets").on("click",".swis-slim-rule-customize",function(){var s=n(this).closest(".swis-slim-rule");s.find("input[type=text]").show(),s.find("label").show(),n(this).hide()}),n(".swis-slim-assets").on("click",".swis-slim-rule-actions .button-link-edit",function(){var s=n(this).closest(".swis-slim-rule");s.find(".swis-slim-rule-actions").hide(),s.find(".swis-slim-pretty-rule").hide(),s.find(".swis-slim-hidden").show()}),n(".swis-slim-assets").on("click",".swis-slim-rule-add",function(){var i=n(this).closest(".swis-slim-rule"),s=i.attr("data-slim-rule-id"),r=i.find(".swis-slim-error-message");r.hide();var e=i.attr("data-slim-handle"),a=i.attr("data-slim-rule-type"),t=n(this).text(),c=n(this);c.text(swisperformance_vars.saving_message),c.prop("disabled",!0);s={action:"swis_slim_rule_edit",swis_slim_action:"create",swis_wpnonce:swisperformance_vars._wpnonce,swis_slim_current_page:n("#swis-slim-current-page").text(),swis_slim_handle:e,swis_slim_rule_type:a,swis_slim_exclusions:i.find(".swis-slim-raw-rule input").val(),swis_slim_mode:i.find("input[name=swis_slim_mode_"+s+"]:checked").val(),swis_slim_asset_type:i.find("input[name=swis_slim_asset_type]").val(),swis_slim_frontend:1};return n.post(swisperformance_vars.ajaxurl,s,function(s){try{var e=JSON.parse(s)}catch(s){return r.html(swisperformance_vars.invalid_response),r.show(),c.text(t),c.prop("disabled",!1),!1}e.success?(i.closest("tr").find(".swis-slim-asset-status").html(e.status),i.replaceWith(e.message)):(r.html(e.error),r.show(),c.text(t),c.prop("disabled",!1))}),!1}),n(".swis-slim-assets").on("click",".swis-slim-rule-save",function(){var i=n(this).closest(".swis-slim-rule"),s=i.attr("data-slim-rule-id"),r=i.find(".swis-slim-error-message");r.hide();var e=i.attr("data-slim-handle"),a=i.attr("data-slim-rule-type"),t=n(this).text(),c=n(this);c.text(swisperformance_vars.saving_message),c.prop("disabled",!0);s={action:"swis_slim_rule_edit",swis_slim_action:"update",swis_wpnonce:swisperformance_vars._wpnonce,swis_slim_current_page:n("#swis-slim-current-page").text(),swis_slim_handle:e,swis_slim_rule_type:a,swis_slim_exclusions:i.find(".swis-slim-raw-rule input").val(),swis_slim_mode:i.find("input[name=swis_slim_mode_"+s+"]:checked").val(),swis_slim_asset_type:i.find("input[name=swis_slim_asset_type]").val(),swis_slim_frontend:1};return n.post(swisperformance_vars.ajaxurl,s,function(s){try{var e=JSON.parse(s)}catch(s){return r.html(swisperformance_vars.invalid_response),r.show(),c.text(t),c.prop("disabled",!1),!1}e.success?(i.closest("tr").find(".swis-slim-asset-status").html(e.status),i.replaceWith(e.message)):(r.html(e.error),r.show(),c.text(t),c.prop("disabled",!1))}),!1}),n(".swis-slim-assets").on("click",".button-link-delete",function(){var i=n(this).closest(".swis-slim-rule"),s=i.attr("data-slim-rule-id"),r=i.find(".swis-slim-error-message");r.hide();var e=i.attr("data-slim-handle"),a=i.attr("data-slim-rule-type"),t=n(this).text(),c=n(this);if(!confirm(swisperformance_vars.remove_rule))return!1;c.text(swisperformance_vars.removing_message),c.prop("disabled",!0);s={action:"swis_slim_rule_edit",swis_slim_action:"delete",swis_wpnonce:swisperformance_vars._wpnonce,swis_slim_current_page:n("#swis-slim-current-page").text(),swis_slim_handle:e,swis_slim_rule_type:a,swis_slim_mode:i.find("input[name=swis_slim_mode_"+s+"]:checked").val(),swis_slim_asset_type:i.find("input[name=swis_slim_asset_type]").val(),swis_slim_frontend:1};return n.post(swisperformance_vars.ajaxurl,s,function(s){try{var e=JSON.parse(s)}catch(s){return r.html(swisperformance_vars.invalid_response),r.show(),c.text(t),c.prop("disabled",!1),!1}e.success?(i.closest("tr").find(".swis-slim-asset-status").html(e.status),i.replaceWith(e.message)):(r.html(e.error),r.show(),c.text(t),c.prop("disabled",!1))}),!1}),n("#swis-slim-assets-pane").on("click",".swis-ccss-actions .button-link-generate",function(){n(".swis-ccss-spinner").addClass("swis-ccss-show-inline"),n(".swis-ccss-error-message").hide(),n(".swis-ccss-success-message").hide();var s={action:"swis_url_generate_page_css",swis_generate_css_nonce:swisccss_vars._wpnonce,types:swis_ccss_types,page_url:swis_ccss_url};return n.post(swisperformance_vars.ajaxurl,s,function(s){try{var e=JSON.parse(s)}catch(s){return n(".swis-ccss-error-message").html(swisperformance_vars.invalid_response),n(".swis-ccss-error-message").show(),n(".swis-ccss-spinner").removeClass("swis-ccss-show-inline"),!1}return e.error?(e.info?n(".swis-ccss-error-message").html(e.error+": "+e.info):n(".swis-ccss-error-message").html(e.error),n(".swis-ccss-error-message").show(),n(".swis-ccss-spinner").removeClass("swis-ccss-show-inline")):0<e.pending?setTimeout(function(){!function i(s){s={action:"swis_url_generate_page_css",swis_generate_css_nonce:swisccss_vars._wpnonce,pending_id:s};n.post(swisperformance_vars.ajaxurl,s,function(s){try{var e=JSON.parse(s)}catch(s){return n(".swis-ccss-error-message").html(swisperformance_vars.invalid_response),n(".swis-ccss-error-message").show(),n(".swis-ccss-spinner").removeClass("swis-ccss-show-inline"),!1}if(e.error)e.info?n(".swis-ccss-error-message").html(e.error+": "+e.info):n(".swis-ccss-error-message").html(e.error),n(".swis-ccss-error-message").show(),n(".swis-ccss-spinner").removeClass("swis-ccss-show-inline");else if(0<e.pending)setTimeout(function(){i(e.pending)},8e3);else{if(!(0<e.info.length))return n(".swis-ccss-error-message").html(swisperformance_vars.invalid_response),n(".swis-ccss-error-message").show(),n(".swis-ccss-spinner").removeClass("swis-ccss-show-inline"),!1;n("#swis-active-critical-css").replaceWith(e.info)}})}(e.pending)},8e3):(n(".swis-ccss-error-message").html(swisperformance_vars.invalid_response),n(".swis-ccss-error-message").show(),n(".swis-ccss-spinner").removeClass("swis-ccss-show-inline")),!1}),!1}),n("#swis-slim-assets-pane").on("click",".swis-ccss-actions .button-link-add",function(){return n("#swis-active-critical-css .swis-ccss-add").toggle(),n("#swis-active-critical-css .swis-ccss-edit-template").hide(),!1}),n("#swis-slim-assets-pane").on("click",".swis-ccss-actions .button-link-edit-template",function(){return n("#swis-active-critical-css .swis-ccss-edit-template").toggle(),n("#swis-active-critical-css .swis-ccss-add").hide(),!1}),n("#swis-slim-assets-pane").on("click",".swis-ccss-actions .button-link-edit",function(){return n("#swis-active-critical-css .swis-ccss-edit").toggle(),!1}),n("#swis-slim-assets-pane").on("click",".swis-ccss-add .button-link-save",function(){var s=n("#swis-critical-css-code").val(),s={action:"swis_save_ccss",swis_generate_css_nonce:swisccss_vars._wpnonce,swis_ccss_code:s,swis_ccss_type:"page",page_url:swis_ccss_url};return n(this).prop("disabled",!0),n(this).text(swisccss_vars.saving_message),r(s,n(this)),!1}),n("#swis-slim-assets-pane").on("click",".swis-ccss-edit .button-link-save",function(){var s=n("#swis-critical-css-page-code").val(),s={action:"swis_save_ccss",swis_generate_css_nonce:swisccss_vars._wpnonce,swis_ccss_code:s,swis_ccss_type:"page",page_url:swis_ccss_url};return n(this).prop("disabled",!0),n(this).text(swisccss_vars.saving_message),r(s,n(this)),!1}),n("#swis-slim-assets-pane").on("click",".swis-ccss-edit-template .button-link-save",function(){var s=n("#swis-critical-css-template-code").val(),s={action:"swis_save_ccss",swis_generate_css_nonce:swisccss_vars._wpnonce,swis_ccss_code:s,swis_ccss_type:"template",swis_ccss_template:swis_ccss_type,page_url:swis_ccss_url};return n(this).prop("disabled",!0),n(this).text(swisccss_vars.saving_message),r(s,n(this)),!1})})}window.addEventListener&&window.addEventListener("DOMContentLoaded",swisSlimLoad);