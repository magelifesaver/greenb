(()=>{"use strict";var e={87:e=>{e.exports=window.lodash}},t={};function i(o){var r=t[o];if(void 0!==r)return r.exports;var c=t[o]={exports:{}};return e[o](c,c.exports,i),c.exports}(()=>{const e=window.wc.blocksCheckout,t=window.React,o=window.wp.element,r=window.wp.components,c=window.wp.i18n,n=window.wp.data;var a=i(87);const l=window.wc.wcSettings,s=JSON.parse('{"apiVersion":2,"name":"tpfw/tpfw-delivery-timepicker-block","version":"2.0.0","title":"Delivery Timepicker Block","category":"woocommerce","description":"Adds a time and a date field for a delivery choice.","supports":{"html":false,"align":false,"multiple":false,"reusable":false},"parent":["woocommerce/checkout-shipping-methods-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":true}},"text":{"type":"string","default":""}},"textdomain":"tpfw"}');(0,e.registerCheckoutBlock)({metadata:s,component:({checkoutExtensionData:e,extensions:s})=>{i(87);const[d,m]=(0,o.useState)(""),[p,w]=(0,o.useState)(""),{date_input:u}=(0,l.getSetting)("tpfw-delivery-timepicker_data",""),{setExtensionData:f}=e,v=((0,o.useCallback)((0,a.debounce)(((e,t,i)=>{f(e,t,i)}),1),[f]),(0,o.useCallback)((0,a.debounce)((e=>{m(e)}),100),[m])),k=(0,o.useCallback)((0,a.debounce)((e=>{w(e)}),100),[w]),_="tpfw-delivery-time",{setValidationErrors:y,clearValidationError:g}=(0,n.useDispatch)("wc/store/validation"),h=(0,n.useSelect)((e=>e("wc/store/validation").getValidationError(_)));return(0,o.useEffect)((()=>{jQuery(document).trigger("tpfw_loaded_blocks_timepicker_shipping");const e=()=>{jQuery(document).trigger("tpfw_loaded_blocks_timepicker_shipping")};return window.addEventListener("load",e),()=>{f("tpfw-deliverytime","delivery_time",""),f("tpfw-deliverytime","delivery_date",""),window.removeEventListener("load",e)}}),[]),(0,o.useEffect)((()=>{f("tpfw-deliverytime","delivery_time",p),f("tpfw-deliverytime","delivery_date",d)}),[f,p,d]),(0,o.useEffect)((()=>(""!=p&&null!=p&&"undefined"!=p?h&&g(_):y({[_]:{message:(0,c.__)("Please pick a time.","time-picker-for-woocommerce"),hidden:!0}}),()=>{g(_)})),[d,p,g,y,_]),(0,t.createElement)("div",null,(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wc-block-components-checkout-step__heading"},(0,t.createElement)("h2",{className:"wc-block-components-title "},(0,c.__)("Delivery time","time-picker-for-woocommerce"))),(0,t.createElement)("p",{className:"wc-block-components-checkout-step__description"},(0,c.__)("Select the date and time when you like to receive your delivery.","time-picker-for-woocommerce")),(0,t.createElement)("div",{id:"tpfw-date_field"},(0,t.createElement)(r.SelectControl,{id:"tpfw-date",value:d,options:u.options,className:"delivery",onChange:e=>function(e){v(e),k("")}(e),__nextHasNoMarginBottom:!0})),(0,t.createElement)("div",{className:"wc-block-components-text-input"},(0,t.createElement)("input",{id:"tpfw-time",type:"text",value:p,required:!0,placeholder:(0,c.__)("Time","time-picker-for-woocommerce"),className:"tpfw-time delivery",onInput:e=>{!function(e){k(e.target.value)}(e)}}))))}})})()})();